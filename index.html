<!doctype html>
<!--[if IE 6 ]><html lang="en-us" class="ie6"> <![endif]-->
<!--[if IE 7 ]><html lang="en-us" class="ie7"> <![endif]-->
<!--[if IE 8 ]><html lang="en-us" class="ie8"> <![endif]-->
<!--[if (gt IE 7)|!(IE)]><!-->
<html lang="en-us"><!--<![endif]-->
<head>
	<meta charset="utf-8">

	<title>Lasso - Plugin Documentation</title>

	<meta name="description" content="">
	<meta name="author" content="Aesopinteractive LLC">
	<meta name="copyright" content="Aesopinteractive LLC">
	<meta name="date" content="2015-01-21T00:00:00+01:00">
	<link rel="stylesheet" href="assets/css/documenter_style.css" media="all">
	 <link href="assets/js/google-code-prettify/prettify.css" rel="stylesheet">


	<style>
		html{background-color:#FFFFFF;color:#383838;}
		::-moz-selection{background:#444444;color:#DDDDDD;}
		::selection{background:#444444;color:#DDDDDD;}
		body {
			-webkit-font-smoothing: antialiased;
		    -moz-osx-font-smoothing: grayscale;
		}
		#documenter_sidebar #documenter_logo{background-image:url();}
		a{color:#0000FF;}
		.btn {
			border-radius:3px;
		}
		.btn-primary {
			  background-image: -moz-linear-gradient(top, #0088CC, #0044CC);
			  background-image: -ms-linear-gradient(top, #0088CC, #0044CC);
			  background-image: -webkit-gradient(linear, 0 0, 0 0088CC%, from(#DDDDDD), to(#0044CC));
			  background-image: -webkit-linear-gradient(top, #0088CC, #0044CC);
			  background-image: -o-linear-gradient(top, #0088CC, #0044CC);
			  background-image: linear-gradient(top, #0088CC, #0044CC);
			  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#0088CC', endColorstr='#0044CC', GradientType=0);
			  border-color: #0044CC #0044CC #bfbfbf;
			  color:#FFFFFF;
		}
		.btn-primary:hover,
		.btn-primary:active,
		.btn-primary.active,
		.btn-primary.disabled,
		.btn-primary[disabled] {
		  border-color: #0088CC #0088CC #bfbfbf;
		  background-color: #0044CC;
		}
		hr{border-top:1px solid #EBEBEB;border-bottom:1px solid #FFFFFF;}
		#documenter_sidebar, #documenter_sidebar ul a{background-color:#F59E00;color:#333;}
		#documenter_sidebar ul a{text-shadow:1px 1px 0px rgba(255,255,255,0.2);}
		#documenter_sidebar ul a{
			border-top:1px solid #F59E00;
			border-bottom:none;
			color:#333;
			box-shadow:inset -1px 1px 1px rgba(255,255,255,0.05);
		}
		#documenter_sidebar ul a:hover{
			background:#E09100;
			color:#333;
			border-top:1px solid #E09100;
		}
		#documenter_sidebar img {
			margin:15px;
			max-width:120px;
		}
		#documenter_sidebar ul a.current{background:#E09100;color:#333;border-top:1px solid #E09100;}
		#documenter_copyright{display:block !important;visibility:visible !important;}
		.img {
			width:100%;
			max-width:600px;
			margin:20px auto 35px;
			height:auto;
			border:1px solid #ddd;
			padding:6px;
			background:white;
			box-shadow:1px 1px 6px -2px rgba(0,0,0,0.2);
			border-radius:2px;
		}
		section {
			clear:left;
		}
		#documenter_content ul {
			list-style-position:inside;
			padding:0;
			margin:0;
		}
		#documenter_content ul li {
			margin-bottom:8px;
		}
		.warning span,
		.info span {
			font-weight: bold;
		}
	</style>

</head>
<body class="documenter-project-itemname">

	<div id="documenter_sidebar">

		<a class="current" href="#documenter_cover"><img src="assets/img/logo.png"></a>

		<ul id="documenter_nav">

			<li><a class="current" href="#documenter_cover">Start</a></li>
			<li><a href="#installation" title="Installation">Installation</a></li>
			<li><a href="#setup" title="Setup">Setup</a></li>
			<li><a href="#editing" title="Editing">Editing</a></li>
			<li><a href="#components" title="Components">Components</a></li>
			<li><a href="#developers" title="Developers">Developers</a></li>

		</ul>

	</div>

	<div id="documenter_content">

		<section id="documenter_cover">
			<h1>Lasso</h1>
			<h2>Plugin Documentation</h2>
			<hr>
			<ul>
				<li>created: 01/21/2015</li>
				<li>latest update: 02/07/2015</li>
				<li>by: Nick Haskins</li>
				<li>email: <a href="mailto:info@aesopinteractive.com">info@aesopinteractive.com</a></li>
			</ul>
			<p>Lasso is a front-end editor plugin for WordPress allows you to create, edit, and publish content on the front-end, and was originally designed to work closely with Aesop Story Engine, the free WordPress plugin for storytelling. This is the very same editor found on <a href="https://story.am">Story.AM</a>. Out-of-the-box it works on any post type whether it be posts, pages, or custom post types. It also features built-in support for editing standard images inserted via the WordPress post editor, as well as front-end support for changing the title and featured image.</p>
			<p>If you're utilizing Aesop Story Engine, the components can be moved freely around the post, and most component settings are adjusted in real-time. This includes gallery creation and editing, all done on the front-end.</p>
			<p>The editor is a "toolbox overlay," so what you're seeing is 100% what you're getting, since you're editing the actual post content, and not just a preview of it.</p>
			<p>Aesop Story Engine does not have to be active. In fact using the built-in filters and actions you can build an entirely new front-end editor specific to any use case.</p>

			<p class="warning"><span>Warning:</span> Lasso saves the HTML of a post object into the database. If Aesop Story Engine is activated it converts these shortcodes into HTML on the fly. The only drawback that you need to be aware of, is this; if your post has anything other than text or an Aesop Story Engine component, it will save the HTML version of this. It's important to realize this when using Lasso. <br /><br /> Depending on your application, this may be desired. There's a setting to disable this shortcode conversion, which means you can use Lasso to build HTML layouts.</p>
		</section>

		<section id="installation">
			<div class="page-header"><h3>Installing Lasso</h3><hr class="notop"></div>
			<p>Two ways to install. Pick your poison. Aesop Story Engine is not required in order to use Lasso, but it is required if you want to utilize movable story components (unless using custom components).</p>

			<p><strong>Easy (through WordPress)</strong></p>
			<ol>
				<li>Login to your WordPress administration area, and go to Plugins-->Add New</li>
				<li>At the top of the page, click "Upload Plugin"</li>
				<li>Once you are here, select "Upload," then "Choose File" to locate the .zip file on your computer, and install</li>
				<li>Install Aesop Story Engine if you wish to use the movable story components</li>
			</ol>

			<p><strong>Not So Easy (FTP)</strong></p>
			<ol>
				<li>Unzip the file and upload into the /wp-content/plugins/ directory using an FTP client of your choice</li>
				<li>Once uploaded, head into your WordPress administration area, and activate Lasso under WordPress-->Plugins</li>
				<li>Install Aesop Story Engine if you wish to use the movable story components</li>
			</ol>

			<p class="info"><span>Note:</span> If multisite, network activate the plugin. This will create a submenu page under the Settings tab in Network-->Dashboard within WordPress. All subsites on the network will use the settings from this main network panel. This is how the editor is configured on Story.AM.</p>

			<p class="info"><span>Note:</span> Lasso can be used independently of Aesop Story Engine. In fact, you can use the provided actions and filters to build your own components, and your own options within the Editor. The sky's the limit :).</p>

			<p class="warning"><span>Warning:</span> Lasso saves the HTML of a post object into the database. If Aesop Story Engine is activated it converts these shortcodes into HTML on the fly. The only drawback that you need to be aware of, is this; if your post has anything other than text or an Aesop Story Engine component, it will save the HTML version of this. It's important to realize this when using Lasso.</p>

		</section>

		<section id="setup">
			<div class="page-header"><h3>Getting Things Setup</h3><hr class="notop"></div>
			<p>Whether you have network activated Lasso on a multisite network, or simply have it activated on a single-site, the setup is still the same. At minimum, the editor requires the <strong>Article Class</strong>, or, the CSS class of the main container holding the post. Everything else is optional.</p>
			<ul>
				<li>
					<strong>Article Class</strong>
					This is the only required field, and is the CSS class of the immediate container element holding the_content. In some themes, this is just .entry-content, but we can't assume this. You'll need to use <em>Chrome Inspector</em> to find the appropriate CSS class to use in your specific theme.
				</li>
				<li>
					<strong>Featured Image Class</strong>
					If your specific theme supports thumbnail images, or "Featured Post" images, and that image is set as a background-image, then supply the CSS class of the container that's holding the image. Lasso will append an icon on that image that will allow users to open the media library and select a new image. After a user selects the image, it is saved automatically.
				</li>
				<li>
					<strong>Article Title Class</strong>
					Lasso supports changing the title of the post (not to be confused with "the slug" in this case), by letting the user click into the title and type. When the user clicks elsewhere, the title is automatically saved. If you would like this feature, supply the CSS class of the post title.
				</li>
				<li>
					<strong>Disable Post Saving</strong>
					By default Lasso will save ALL HTML located within the_content to the current post id. This means that if you have a third party shortcode, it will save the HTML version of this and will udpate the database for that page or post. Please be aware of this when saving a post or page. Of course you can always use the WordPress revision system, and we'll be working to make this easier in the future, but in the time being, be aware that it saves <em>ALL HTML</em>. If you do not want this default behavior, then toggle this box. This means that you'll be using the provided actions to "hook in" and save the content to wherever it is that you want to save it. For example, you could have a version of the editor saving custom field data.
				</li>
				<li>
					<strong>Disable Post Settings</strong>
					In the initial Editor controls, the "gear" icon will open up the settings for the page or post. This allows you to change the status of the post, as well as the slug. If you do not want this to be shown, toggle this box.
				</li>
				<li>
					<strong>Disable Post Adding</strong>
					In the initial Editor controls, the "+" icon will open up a modal allowing you to add a new post. If you do not want this to be shown, then toggle this box.
				</li>
				<li>
					<strong>Disable Aesop Component Conversion</strong>
					Lasso can save the content's HTML completely. By default, we'll convert Aesop Story Engine shortcodes into HTML and back. If you do not want this to happen, meaning, if you do not have Aesop Story Engine active, or you are not using it in your application, then toggle this box. This means that all HTML will be saved and no shortcodes will be converted.
				</li>
			</ul>

			<p class="info"><span>Note:</span> There is only one requirement of the theme utilizing Lasso; the content area must have the_content filter applied via WordPress. For 99% of themes this is fine, but there are those odd balls that do exist.</p>

			<p class="warning"><span>Warning:</span> Lasso saves the HTML of a post object into the database. If Aesop Story Engine is activated it converts these shortcodes into HTML on the fly. The only drawback that you need to be aware of, is this; if your post has anything other than text or an Aesop Story Engine component, it will save the HTML version of this. It's important to realize this when using Lasso.</p>


		</section>

		<section id="editing">
			<div class="page-header"><h3>Using the Editor</h3><hr class="notop"></div>

			<p>The Editor controls can be found at the bottom of any page or post on the front-end. To start editing, click the "pen" icon. Then, click anywhere in the text and start typing. Highlight a piece of text with your mouse, then choose any of the available formatting options such as <strong>Bold</strong>, <u>Underline</u>, <em>Italicize</em>, or <strike>Strikethrough</strike>. The post can be saved by clicking the blue "disk" icon in the bottom right hand corner.</p>

			<img class="img" src="assets/img/editor.gif">

			<h3>Inserting HTML</h3><hr class="notop">
			<p>HTML can be inserted by clicking the "< >" icon. When you click away, the editor will remember where your cursor last left off, and will insert the HTML in the exact area. Note: HTML can't be edited from the front-end once inserted. You'll need to access your "text" tab within the backend post edit screen in WordPress.</p>

			<img class="img" src="assets/img/adding-html.gif">

			<h3>Creating Links</h3><hr class="notop">
			<p>Links can be created by first highlighting the text, then selecting the link icon in the toolbar. Type in the URL, then click the check button save. To edit an existing link, double click a link while in edit mode, and the link will be supplied in the permalink drop-up area. Change the link, then select the check button save, and the link will be udpated.</p>

			NEED GIF HERE

		</section>

		<section id="components">
			<div class="page-header"><h3>Working with Components</h3><hr class="notop"></div>
			<p>Story components can be accessed by clicking the "+" after entering the editor. From here, you can drag an icon onto the story. After the component has been added, you can move it around the story as you see fit. The text in the story cannot be moved. Only components.</p>

			<p>Within each component you'll find a settings bar with four icons. These icons will let you move the component, enter that components settings, clone that component, or delete that component.</p>

			<img class="img" src="assets/img/using-components.gif">

			<h3>Creating Galleries </h3><hr class="notop">
			<p>First add the gallery component by dragging it from the component tray into a post. Select the gear icon, then select a gallery to load. If you have not created any galleries previously, then there will be a button to create a new gallery. For the time being, this area does require a page refresh but we hope to eliminate this in future updates.</p>

			<p class="info"><span>Note:</span> This feature is only available if Aesop Story Engine is installed.</p>

			NEED GIF HERE

			<h3>Adding Maps</h3><hr class="notop">
			<p>Add a map component by dragging it from the component tray into a post. There is only one map allowed per post at this time. After adding, click anywhere on the map to add a map marker. Then, click the marker to add a location tooltip text. You can drag the markers around, as well as zoom out and adjust the pan. After things are setup the way you like, click "save locations." Then, save the post.</p>

			<p>For the time being, to edit existing locations, delete the map component, and add it back again. The locations will not be removed, but for now this is the only way to invoke editing map locations. We hope to eliminate this on future updates.</p>

			<p class="info"><span>Note:</span> This feature is only available if Aesop Story Engine is installed.</p>

			NEED GIF HERE

		</section>

		<section id="developers">
			<div class="page-header"><h3>Developers</h3><hr class="notop"></div>
			<p>Lasso is amazingly extensive. In fact, you don't even have to have Aesop Story Engine active. There are multiple ways to extend the editor, and/or Aesop Story Engine. You can use it on custom fields without Aesop, or you can create custom components for Aesop Story Engine and use them within Lasso. You can also create individual custom components that are not made of shortcodes, with options as data attributes. All possible through actions and filters.</p>

			<h3>Filters</h3><hr class="notop">
			<pre>lasso_runs_on</pre>
			<p>Filter where Lasso can be used and who can use it. By default this is set to is_singular() and lasso_user_can() which equates to edit_posts.</p>
			<hr />

			<pre>apply_filters('lasso_localized_objects', $args )</pre>
			<p>Filter the array of objects being localized with js</p>
			<hr />

			<pre>apply_filters('lasso_insert_gallery_args', $args )</pre>
			<p>Filter the array of arguments for saving a post gallery.</p>
			<hr />

			<pre>apply_filters('lasso_insert_object_args', $args )</pre>
			<p>Filter the array of arguments for inserting a new post.</p>
			<hr />

			<pre>apply_filters('lasso_object_status_update_args', $args )</pre>
			<p>Filter the array of arguments for updating the status of a post object. I.e, draft to publish, etc.</p>
			<hr />

			<pre>apply_filters('lasso_object_save_args', $args )</pre>
			<p>Filter the array of arguments for saving an existing post object.</p>
			<hr />

			<pre>apply_filters('lasso_object_publish_args', $args )</pre>
			<p>Filter the array of arguments for publishing a new post object.</p>
			<hr />

			<pre>apply_filters('lasso_title_updated_args', $args )</pre>
			<p>Filter the array of arguments for updating a post object title.</p>
			<hr />

			<pre>lasso_components</pre>
			<p>Filter the list of components available to the editor. Here are a some examples.</p>
			<hr />

			<pre>lasso_control_classes</pre>
			<p>Add a CSS class to the control bar.</p>
			<hr />

			<pre>lasso_sidebar_classes</pre>
			<p>Add a CSS class to the settings sidebar.</p>
			<hr />

			<pre>lasso_toolbar_classes</pre>
			<p>Add a CSS class to the text toolbar.</p>
			<hr />

			<pre>lasso_component_classes</pre>
			<p>Add a CSS class to the component settings toolbar.</p>
			<hr />

			<pre>lasso_modal_settings_classes</pre>
			<p>Add a CSS class to the post settings modal.</p>
			<hr />

			<pre>lasso_modal_post_classes</pre>
			<p>Add a CSS class to the post settings modal.</p>
			<hr />

			<pre>lasso_wpimg_classes</pre>
			<p>Add a CSS class to the wrapper used to edit WordPress inserted images.</p>
			<hr />

			<pre>lasso_custom_options</pre> 
			<p>Add an arrayof custom options that represent all custom components.</p>
			<hr />

			<pre>lasso_capabilities</pre>
			<p>Filter the capability level for the editor (default is edit_posts).</p>

			<h3>Actions</h3><hr class="notop">

			<pre>do_action( 'lasso_gallery_published', $postid, $gallery_ids, $userid );</pre>
			<p>Fired when a new gallery is created.</p>
			<hr />

			<pre>do_action( 'lasso_gallery_saved', $postid, $gallery_ids, $userid );</pre>
			<p>Fired when an existing gallery is saved.</p>
			<hr />

			<pre>do_action( 'lasso_featured_image_set', $postid, $image_id, $userid );</pre>
			<p>Fired when the featured image is set.</p>
			<hr />

			<pre>do_action( 'lasso_new_object', $postid, $object, $title, $userid );</pre>
			<p>Fired when a new post is created.</p>
			<hr />

			<pre>do_action( 'lasso_post_updated', $postid, $slug, $status, $userid ); </pre>
			<p>This is fired when an existing post is updated.</p>
			<hr />

			<pre>do_action( 'lasso_post_saved', $postid, $content, $userid );</pre>
			<p>Fired when an existing post is saved.</p>
			<hr />

			<pre>do_action( 'lasso_post_published', $postid, $content, $userid ;</pre>
			<p>Fired when a post is published from draft.</p>
			<hr />

			<pre>do_action( 'lasso_title_updated', $postid, $title, $userid );</pre>
			<p>Fired when the title is updated.</p>
			<hr />

			<pre>lasso_toolbar_components</pre>
			<p>Fired at the end of the list of components in the drop-up menu.</p>
			<hr />

			<pre>lasso_modal_post_form</pre>
			<p>Fired at the end of the post settings form in the post settings modal.</p>
			<hr />

			<pre>lasso_modal_post_form_footer</pre>
			<p>Fired at the end of the post settings form in the post settings modal footer typically used for inserting hidden form fields.</p>
			<hr />

			<h3>Pluggable Functions</h3><hr class="notop">

			<pre>lasso_user_can</pre>
			<p>Determines who can use the editor. By default this returns is_user_logged_in() and current_user_can('edit_posts')</p>

			<p class="info">All component functions inside public/includes/components.php are pluggable</p>

			<hr />
			<h3>Sample Add-on Plugin</h3><hr class="notop">
			<p>Hit the link below for a sample plugin that demonstrates how to add a custom component in two different ways; one using a shortcode, and one using the markup of your choice. Component options are added as data-attributes and are only shown if the user is logged in, and if that user has the correct capabilities. The settings in the settings panel are then "mapped" to the data-attributes on the fly. This is how you're able to use a component that's in shortcode form, or just normal markup. Skies the limit!</p>

			<a href="https://github.com/AesopInteractive/sample-addon">https://github.com/AesopInteractive/sample-addon</a>

		</section>

	</div>
	<script src="assets/js/jquery.js"></script>
	<script src="assets/js/jquery.scrollTo.js"></script>
	<script src="assets/js/jquery.easing.js"></script>
<script src="assets/js/google-code-prettify/prettify.js"></script> 
	<script>document.createElement('section');var duration='500',easing='swing';</script>
	<script src="assets/js/script.js"></script>
</body>
</html>
